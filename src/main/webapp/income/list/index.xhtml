<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition  template="/static/template/index.xhtml"
                 xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="container">
        <div class="container-header">
            <div class="container-header-left">
                <h1>รายรับ</h1>
            </div>
        </div>
        <p:outputPanel styleClass="tab-header">
            <h:form prependId="false">
                <ul class="tab-menu">
                    <li class="#{incomeItemTabCtrl.activeTab('all')}">
                        <p:commandLink value="ทั้งหมด"
                                       actionListener="#{incomeItemTabCtrl.onChangeTab()}"
                                       update="@(.tab-container), @form">
                            <f:param name="tab" value="all"/>
                        </p:commandLink>
                    </li>
                    <li class="#{incomeItemTabCtrl.activeTab('day')}">
                        <p:commandLink value="วัน"
                                       actionListener="#{incomeItemTabCtrl.onChangeTab()}"
                                       update="@(.tab-container), @form">
                            <f:param name="tab" value="day"/>
                        </p:commandLink>
                    </li>
                    <li class="#{incomeItemTabCtrl.activeTab('week')}">
                        <p:commandLink value="สัปดาห์"
                                       actionListener="#{incomeItemTabCtrl.onChangeTab()}"
                                       update="@(.tab-container), @form">
                            <f:param name="tab" value="week"/>
                        </p:commandLink>
                    </li>
                    <li class="#{incomeItemTabCtrl.activeTab('month')}">
                        <p:commandLink value="เดือน"
                                       actionListener="#{incomeItemTabCtrl.onChangeTab()}"
                                       update="@(.tab-container), @form">
                            <f:param name="tab" value="month"/>
                        </p:commandLink>
                    </li>
                    <li class="#{incomeItemTabCtrl.activeTab('year')}">
                        <p:commandLink value="ปี"
                                       actionListener="#{incomeItemTabCtrl.onChangeTab()}"
                                       update="@(.tab-container), @form">
                            <f:param name="tab" value="year"/>
                        </p:commandLink>
                    </li>
                    <li class="clear"></li>
                </ul>
            </h:form>
        </p:outputPanel>
        <p:outputPanel styleClass="tab-container">
            <ui:include src="/income/list/#{incomeItemTabCtrl.currentTab}/index.xhtml"/>
        </p:outputPanel>
    </ui:define>

    <ui:define name="dialog">
        <p:dialog header="เพิ่มรายการรายรับ"
                  modal="true"
                  width="550"
                  resizable="false"
                  id="addIncomeItemDialog"
                  widgetVar="addIncomeItemWidgetDialog">
            <h:form id="addIncomeItemDialogForm" 
                    styleClass="has-tag-list"
                    prependId="false">
                <h:panelGrid class="form-grid"
                             columns="2">
                    <p:outputPanel>
                        <h:outputText value="รายการ"/>
                        <h:outputText value="*" styleClass="require"/>
                    </p:outputPanel>
                    <p:outputPanel>
                        <p:inputText id="addIncomeName" 
                                     required="true"
                                     styleClass="require-title"
                                     value="#{incomeItemCtrl.item.incomeName}"/>
                        <p:watermark for="addIncomeName" value="พิมพ์ชื่อรายรับ"/>
                    </p:outputPanel>

                    <p:outputPanel>
                        <h:outputText value="จำนวนเงิน"/>
                        <h:outputText value="*" styleClass="require"/>
                    </p:outputPanel>
                    <p:outputPanel>
                        <p:inputText id="addIncomeValue" 
                                     required="true"
                                     styleClass="require-title"
                                     value="#{incomeItemCtrl.item.incomeValue}"/>
                        <p:watermark for="addIncomeValue" value="พิมพ์ตัวเลขเท่านั้น"/>
                    </p:outputPanel>

                    <p:outputPanel>
                        <h:outputText value="วัน/เวลา"/>
                    </p:outputPanel>
                    <p:outputPanel>
                        <p:inputText id="addIncomeDate" 
                                     value="#{incomeItemCtrl.item.incomeDate}" 
                                     styleClass="ic-calendar">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                        <p:watermark for="addIncomeDate" value="เลือกวัน/เวลาที่มีรายรับ"/>
                    </p:outputPanel>

                    <p:outputPanel>
                        <h:outputText value="ป้ายกำกับ"/>
                    </p:outputPanel>
                    <p:outputPanel>
                        <p:dataList value="#{incomeItemCtrl.item.tags}"
                                    var="tag"
                                    rows="25"
                                    rowIndexVar="counter"
                                    styleClass="tag-list"
                                    emptyMessage="ยังไม่มีป้ายกำกับ"
                                    paginatorPosition="bottom">

                            <div class="tag-item">
                                <p:commandLink value="#{tag.name}"/>
                            </div>
                        </p:dataList>
                        <p:commandButton title="คลิกเพื่อเพิ่มป้ายกำกับ"
                                         icon="ui-icon-plus"
                                         oncomplete="PF('tagWidgetDialog').show();"
                                         styleClass="white-button tooltip-w"/>
                    </p:outputPanel>
                </h:panelGrid>
                <div class="dialog-footer">
                    <div class="dialog-footer-left">

                    </div>
                    <div class="dialog-footer-right">
                        <p:commandButton value="เพิ่ม"
                                         oncomplete="PF('addIncomeItemWidgetDialog').hide();"
                                         icon="ui-icon-check"
                                         styleClass="green-button"/>
                        <p:spacer width="10"/>
                        <p:commandButton value="ยกเลิก"
                                         type="button"
                                         onclick="PF('addIncomeItemWidgetDialog').hide();"
                                         icon="ui-icon-close"
                                         styleClass="white-button"/>
                    </div>
                </div>
            </h:form>
        </p:dialog>

        <ui:include src="/dialogs/tagDialog.xhtml"/>
    </ui:define>
</ui:composition>